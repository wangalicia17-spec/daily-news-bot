<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI Evo â€¢ è¿›åŒ–æ—¥å¿—</title>
    <!-- iOS PWA ä¼˜åŒ– -->
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2040/2040946.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥å›¾æ ‡åº“ -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- å¼•å…¥çƒŸèŠ±ç‰¹æ•ˆåº“ -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap');
        body { font-family: 'Noto Sans SC', sans-serif; background-color: #f3f4f6; -webkit-tap-highlight-color: transparent; }
        
        /* éœ“è™¹æ¸å˜èƒŒæ™¯ */
        .cyber-bg {
            background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
            min-height: 200px;
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
        }
        
        /* å¡ç‰‡æµ®åŠ¨æ•ˆæœ */
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }
        .glass-card:active { transform: scale(0.98); }

        /* çŠ¶æ€æ ‡ç­¾é¢œè‰² */
        .status-planned { @apply bg-slate-100 text-slate-500; }
        .status-ing { @apply bg-blue-100 text-blue-600 border border-blue-200; }
        .status-done { @apply bg-green-100 text-green-600 border border-green-200; }

        /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* æ¨¡æ€æ¡†åŠ¨ç”» */
        .modal { transition: opacity 0.25s ease; }
        .modal-content { transition: transform 0.25s ease; }
        body.modal-active { overflow: hidden; }
        
        /* å½©è›‹æŒ‰é’®åŠ¨ç”» */
        .egg-btn { animation: float 3s ease-in-out infinite; }
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
    </style>
</head>
<body class="bg-gray-50 pb-24">

    <!-- é¡¶éƒ¨åŒºåŸŸ -->
    <div class="cyber-bg pt-12 px-6 pb-16 relative shadow-lg">
        <div class="flex justify-between items-center mb-4">
            <div>
                <h1 class="text-3xl font-bold text-white tracking-tight">AI Evo <i class="fas fa-rocket text-yellow-300"></i></h1>
                <p class="text-indigo-100 text-sm mt-1" id="dailyQuote">æ­£åœ¨è¿æ¥ç¥ç»ç½‘ç»œ...</p>
            </div>
            <!-- å½©è›‹æŒ‰é’® -->
            <button onclick="triggerEgg()" class="egg-btn w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-white backdrop-blur-md border border-white/30">
                <i class="fas fa-brain"></i>
            </button>
        </div>
        
        <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
        <div class="flex gap-4 mt-6 overflow-x-auto no-scrollbar">
            <div class="bg-white/20 backdrop-blur-md rounded-xl p-3 min-w-[100px] border border-white/10 text-white">
                <div class="text-xs opacity-80">ç´¯è®¡å­¦ä¹ </div>
                <div class="text-2xl font-bold"><span id="totalCount">0</span> <span class="text-xs font-normal">é¡¹</span></div>
            </div>
            <div class="bg-white/20 backdrop-blur-md rounded-xl p-3 min-w-[100px] border border-white/10 text-white">
                <div class="text-xs opacity-80">å·²æŒæ¡</div>
                <div class="text-2xl font-bold"><span id="doneCount">0</span> <span class="text-xs font-normal">é¡¹</span></div>
            </div>
        </div>
    </div>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="px-5 -mt-10 relative z-10">
        
        <!-- è¿‡æ»¤å™¨ -->
        <div class="flex gap-2 mb-4 overflow-x-auto no-scrollbar py-2">
            <button onclick="filterList('all')" class="filter-btn active bg-indigo-600 text-white px-4 py-1.5 rounded-full text-sm shadow-md transition-colors">å…¨éƒ¨</button>
            <button onclick="filterList('ing')" class="filter-btn bg-white text-gray-500 px-4 py-1.5 rounded-full text-sm shadow-sm">âš¡ï¸ è¿›åŒ–ä¸­</button>
            <button onclick="filterList('planned')" class="filter-btn bg-white text-gray-500 px-4 py-1.5 rounded-full text-sm shadow-sm">ğŸ“… è®¡åˆ’</button>
            <button onclick="filterList('done')" class="filter-btn bg-white text-gray-500 px-4 py-1.5 rounded-full text-sm shadow-sm">âœ… å·²æŒæ¡</button>
        </div>

        <!-- åˆ—è¡¨å®¹å™¨ -->
        <div id="listContainer" class="space-y-4">
            <!-- JS åŠ¨æ€æ¸²æŸ“åˆ—è¡¨ -->
        </div>

        <!-- ç©ºçŠ¶æ€æç¤º -->
        <div id="emptyState" class="hidden text-center py-20 text-gray-400">
            <i class="fas fa-robot text-4xl mb-3 opacity-50"></i>
            <p>è¿˜æ²¡æœ‰è®°å½•å“¦ï¼Œå¿«å»å¼€å¯ä½ çš„è¿›åŒ–ä¹‹æ—…å§ï¼</p>
        </div>
    </div>

    <!-- æ‚¬æµ®æ·»åŠ æŒ‰é’® -->
    <button onclick="openModal()" class="fixed bottom-8 right-6 w-14 h-14 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full shadow-xl flex items-center justify-center text-2xl transition transform hover:scale-110 active:scale-95 z-40">
        <i class="fas fa-plus"></i>
    </button>

    <!-- ç¼–è¾‘/æ·»åŠ  æ¨¡æ€æ¡† -->
    <div id="modal" class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50">
        <div class="modal-overlay absolute w-full h-full bg-black opacity-50" onclick="closeModal()"></div>
        
        <div class="modal-content bg-white w-11/12 md:max-w-md mx-auto rounded-2xl shadow-2xl z-50 overflow-y-auto max-h-[90vh] transform scale-95 opacity-0">
            <div class="p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-5 flex justify-between">
                    <span id="modalTitle">ğŸš€ æ–°å»ºå­¦ä¹ è®¡åˆ’</span>
                    <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600"><i class="fas fa-times"></i></button>
                </h3>
                
                <form id="planForm" onsubmit="savePlan(event)">
                    <input type="hidden" id="editId">
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ğŸ“… è®¡åˆ’å¼€å§‹æ—¥</label>
                            <input type="date" id="startDate" required class="w-full bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ğŸ¯ å­¦ä¹ å†…å®¹ (Topic)</label>
                            <input type="text" id="topic" placeholder="ä¾‹å¦‚ï¼šå­¦ä¹  DeepSeek Prompt æŠ€å·§" required class="w-full bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ğŸ›  AI å·¥å…· (Tools)</label>
                            <input type="text" id="tools" placeholder="ä¾‹å¦‚ï¼šChatGPT, Midjourney" class="w-full bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ğŸ“‚ å­¦ä¹ æ–‡ä»¶/é“¾æ¥</label>
                            <input type="text" id="files" placeholder="PDFåç§°æˆ–æ•™ç¨‹é“¾æ¥..." class="w-full bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ğŸ’¡ å­¦ä¹ æˆæœ (Outcome)</label>
                            <textarea id="result" rows="2" placeholder="è®°å½•ä¸‹ä½ çš„æ”¶è·å§..." class="w-full bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none"></textarea>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">âš¡ï¸ çŠ¶æ€</label>
                            <select id="status" class="w-full bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none">
                                <option value="planned">ğŸ“… è®¡åˆ’ä¸­</option>
                                <option value="ing">âš¡ï¸ å­¦ä¹ ä¸­</option>
                                <option value="done">âœ… å­¦ä¹ ç»“æŸ</option>
                            </select>
                        </div>
                    </div>

                    <div class="mt-6 flex gap-3">
                        <button type="button" onclick="deletePlan()" id="deleteBtn" class="hidden flex-1 bg-red-50 text-red-600 py-2.5 rounded-xl font-medium text-sm hover:bg-red-100 transition">åˆ é™¤</button>
                        <button type="submit" class="flex-[2] bg-indigo-600 text-white py-2.5 rounded-xl font-medium text-sm hover:bg-indigo-700 shadow-lg transition">ä¿å­˜è®°å½•</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- å½©è›‹å¼¹çª— -->
    <div id="eggModal" class="fixed inset-0 flex items-center justify-center z-[60] pointer-events-none opacity-0 transition-opacity duration-300">
        <div class="bg-black/80 backdrop-blur-md text-white p-6 rounded-2xl max-w-xs text-center transform scale-90 transition-transform duration-300 shadow-2xl border border-indigo-500/50">
            <div class="text-4xl mb-4">ğŸ”®</div>
            <h3 class="text-lg font-bold mb-2 text-indigo-300">æ¥è‡ªæœªæ¥çš„è®¯æ¯</h3>
            <p id="eggText" class="text-sm leading-relaxed text-gray-200">åŠ è½½ä¸­...</p>
        </div>
    </div>

    <script>
        // --- 1. æ•°æ®ç®¡ç† ---
        const STORE_KEY = 'ai_evo_data_v1';
        let plans = JSON.parse(localStorage.getItem(STORE_KEY)) || [];
        let currentFilter = 'all';

        // æ¯æ—¥ä¸€å¥ (æ¿€åŠ±è¯­)
        const quotes = [
            "æ˜¨å¤©çš„å¥‡è¿¹æ˜¯ä»Šå¤©çš„ç§‘æŠ€ã€‚",
            "ä¸è¦å®³æ€• AIï¼Œè¦å®³æ€•ä¸å­¦ä¹  AI çš„äººã€‚",
            "ä½ çš„ç¥ç»ç½‘ç»œä»Šå¤©å‡çº§äº†å—ï¼Ÿ",
            "ä¿æŒé¥¥é¥¿ï¼Œä¿æŒè¿›åŒ–ã€‚",
            "ä»£ç æ˜¯é­”æ³•ï¼ŒAI æ˜¯é­”æ–ã€‚",
            "ç§ä¸€æ£µæ ‘æœ€å¥½çš„æ—¶é—´æ˜¯åå¹´å‰ï¼Œå…¶æ¬¡æ˜¯ç°åœ¨ã€‚"
        ];
        document.getElementById('dailyQuote').innerText = quotes[Math.floor(Math.random() * quotes.length)];

        // --- 2. æ ¸å¿ƒåŠŸèƒ½ï¼šæ¸²æŸ“åˆ—è¡¨ ---
        function renderList() {
            const container = document.getElementById('listContainer');
            const emptyState = document.getElementById('emptyState');
            container.innerHTML = '';
            
            let filteredPlans = plans.filter(p => currentFilter === 'all' || p.status === currentFilter);
            
            // æŒ‰æ—¥æœŸå€’åº
            filteredPlans.sort((a, b) => new Date(b.startDate) - new Date(a.startDate));

            // æ›´æ–°ç»Ÿè®¡
            document.getElementById('totalCount').innerText = plans.length;
            document.getElementById('doneCount').innerText = plans.filter(p => p.status === 'done').length;

            if (filteredPlans.length === 0) {
                emptyState.classList.remove('hidden');
                return;
            } else {
                emptyState.classList.add('hidden');
            }

            filteredPlans.forEach(plan => {
                const statusConfig = {
                    'planned': { class: 'status-planned', text: 'è®¡åˆ’ä¸­', icon: 'fa-calendar' },
                    'ing': { class: 'status-ing', text: 'è¿›åŒ–ä¸­', icon: 'fa-bolt' },
                    'done': { class: 'status-done', text: 'å·²æŒæ¡', icon: 'fa-check' }
                };
                const st = statusConfig[plan.status];

                const card = document.createElement('div');
                card.className = 'glass-card p-4 relative cursor-pointer group';
                card.onclick = () => openModal(plan.id);

                card.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-xs font-mono text-gray-400 bg-gray-100 px-2 py-0.5 rounded">${plan.startDate}</span>
                        <span class="text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1 ${st.class}">
                            <i class="fas ${st.icon}"></i> ${st.text}
                        </span>
                    </div>
                    <h3 class="text-lg font-bold text-gray-800 mb-2 leading-tight">${plan.topic}</h3>
                    
                    ${plan.tools ? `<div class="mb-2 text-sm text-gray-600"><i class="fas fa-tools w-5 text-indigo-400"></i> ${plan.tools}</div>` : ''}
                    
                    ${plan.files ? `<div class="mb-2 text-sm text-gray-600 truncate"><i class="fas fa-folder-open w-5 text-yellow-400"></i> ${plan.files}</div>` : ''}
                    
                    ${plan.result ? `
                        <div class="mt-3 bg-gray-50 p-2 rounded-lg text-sm text-gray-700 border-l-2 border-indigo-400">
                            <i class="fas fa-lightbulb text-yellow-500 mr-1"></i> ${plan.result}
                        </div>
                    ` : ''}
                    
                    <div class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity">
                        <i class="fas fa-pen text-gray-300"></i>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // --- 3. è¿‡æ»¤å™¨é€»è¾‘ ---
        function filterList(type) {
            currentFilter = type;
            // æ›´æ–°æŒ‰é’®æ ·å¼
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if (btn.innerText.includes(getFilterText(type)) || (type === 'all' && btn.innerText === 'å…¨éƒ¨')) {
                    btn.classList.add('bg-indigo-600', 'text-white');
                    btn.classList.remove('bg-white', 'text-gray-500');
                } else {
                    btn.classList.remove('bg-indigo-600', 'text-white');
                    btn.classList.add('bg-white', 'text-gray-500');
                }
            });
            renderList();
        }

        function getFilterText(type) {
            if(type === 'ing') return 'è¿›åŒ–ä¸­';
            if(type === 'planned') return 'è®¡åˆ’';
            if(type === 'done') return 'å·²æŒæ¡';
            return 'å…¨éƒ¨';
        }

        // --- 4. å¢åˆ æ”¹é€»è¾‘ ---
        const modal = document.getElementById('modal');
        const modalContent = document.querySelector('.modal-content');

        function openModal(id = null) {
            const form = document.getElementById('planForm');
            const deleteBtn = document.getElementById('deleteBtn');
            const title = document.getElementById('modalTitle');
            
            modal.classList.remove('opacity-0', 'pointer-events-none');
            document.body.classList.add('modal-active');
            
            // ç®€å•åŠ¨ç”»
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);

            if (id) {
                // ç¼–è¾‘æ¨¡å¼
                const plan = plans.find(p => p.id === id);
                document.getElementById('editId').value = plan.id;
                document.getElementById('startDate').value = plan.startDate;
                document.getElementById('topic').value = plan.topic;
                document.getElementById('tools').value = plan.tools || '';
                document.getElementById('files').value = plan.files || '';
                document.getElementById('result').value = plan.result || '';
                document.getElementById('status').value = plan.status;
                
                deleteBtn.classList.remove('hidden');
                title.innerText = 'ğŸ“ æ›´æ–°è¿›åº¦';
            } else {
                // æ–°å¢æ¨¡å¼
                form.reset();
                document.getElementById('editId').value = '';
                document.getElementById('startDate').value = new Date().toISOString().split('T')[0]; // é»˜è®¤ä»Šå¤©
                document.getElementById('status').value = 'planned';
                
                deleteBtn.classList.add('hidden');
                title.innerText = 'ğŸš€ æ–°å»ºè®¡åˆ’';
            }
        }

        function closeModal() {
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modal.classList.add('opacity-0', 'pointer-events-none');
                document.body.classList.remove('modal-active');
            }, 250);
        }

        function savePlan(e) {
            e.preventDefault();
            const id = document.getElementById('editId').value;
            const status = document.getElementById('status').value;
            
            const newPlan = {
                id: id ? Number(id) : Date.now(),
                startDate: document.getElementById('startDate').value,
                topic: document.getElementById('topic').value,
                tools: document.getElementById('tools').value,
                files: document.getElementById('files').value,
                result: document.getElementById('result').value,
                status: status
            };

            if (id) {
                const index = plans.findIndex(p => p.id == id);
                plans[index] = newPlan;
            } else {
                plans.push(newPlan);
            }

            localStorage.setItem(STORE_KEY, JSON.stringify(plans));
            closeModal();
            renderList();

            // å¦‚æœçŠ¶æ€æ˜¯ Doneï¼Œæ’­æ”¾çƒŸèŠ±
            if (status === 'done') {
                triggerConfetti();
            }
        }

        function deletePlan() {
            const id = document.getElementById('editId').value;
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ')) {
                plans = plans.filter(p => p.id != id);
                localStorage.setItem(STORE_KEY, JSON.stringify(plans));
                closeModal();
                renderList();
            }
        }

        // --- 5. ç‰¹æ•ˆä¸å½©è›‹ ---
        function triggerConfetti() {
            var duration = 3 * 1000;
            var animationEnd = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 60 };

            var interval = setInterval(function() {
                var timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                var particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
            }, 250);
        }

        function randomInRange(min, max) { return Math.random() * (max - min) + min; }

        // å½©è›‹ï¼šæ¥è‡ªæœªæ¥çš„è®¯æ¯
        const eggMessages = [
            "ğŸ”® é¢„æµ‹ï¼šä½ å°†åœ¨3å¤©å†…è§£å†³ä¸€ä¸ªå›°æ‰°å·²ä¹…çš„ Bugã€‚",
            "ğŸ¤– ç³»ç»Ÿæç¤ºï¼šä½ çš„å¤§è„‘ç¥ç»å…ƒæ­£åœ¨å»ºç«‹æ–°çš„ AI è¿æ¥...",
            "ğŸŒŸ åªè¦åšæŒï¼Œä½ å°±æ˜¯æœªæ¥çš„ Prompt å·¥ç¨‹å¸ˆã€‚",
            "ğŸ’¡ å»ºè®®ï¼šè¯•ç€ç”¨ AI å¸®ä½ å†™ä¸€æ®µ Python ä»£ç ã€‚",
            "ğŸš€ ä½ çš„å­¦ä¹ é€Ÿåº¦å·²ç»è¶…è¿‡äº† 80% çš„äººç±»ã€‚",
            "ğŸŒŒ AI ä¸ä¼šå–ä»£ä½ ï¼Œä¼šç”¨ AI çš„ä½ å°†å–ä»£å…¶ä»–äººã€‚"
        ];

        function triggerEgg() {
            const eggModal = document.getElementById('eggModal');
            const eggText = document.getElementById('eggText');
            
            // éšæœºé€‰ä¸€æ¡
            eggText.innerText = eggMessages[Math.floor(Math.random() * eggMessages.length)];
            
            // æ˜¾ç¤ºåŠ¨ç”»
            eggModal.classList.remove('pointer-events-none', 'opacity-0');
            const content = eggModal.querySelector('div');
            content.classList.remove('scale-90');
            content.classList.add('scale-100');
            
            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±
            setTimeout(() => {
                content.classList.remove('scale-100');
                content.classList.add('scale-90');
                eggModal.classList.add('opacity-0', 'pointer-events-none');
            }, 3000);
        }

        // åˆå§‹åŒ–
        renderList();
    </script>
</body>
</html>
